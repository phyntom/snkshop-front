{"ast":null,"code":"export const CartReducer = (state, action) => {\n  switch (action.type) {\n    case 'INCREASE':\n      const increasedIndex = state.cartItems.findIndex(item => item._id === action.payload.product._id && item.size === action.payload.size);\n      state.cartItems[increasedIndex].quantity++;\n      return { ...state,\n        cartItems: [...state.cartItems],\n        ...sumItems(state.cartItems)\n      };\n\n    case 'DECREASE':\n      const decreasedIndex = state.cartItems.findIndex(item => item._id === action.payload.product._id && item.size === action.payload.size);\n\n      if (state.cartItems[decreasedIndex].quantity === 1) {\n        state.cartItems.splice(decreasedIndex, 1);\n      } else {\n        state.cartItems[decreasedIndex].quantity--;\n      }\n\n      return { ...state,\n        cartItems: [...state.cartItems],\n        ...sumItems(state.cartItems)\n      };\n\n    case 'ADD_PRODUCT':\n      const exist = state.cartItems.find(item => item._id === action.payload.currentProduct._id && item.size === action.payload.size);\n\n      if (exist) {\n        const addedIndex = state.cartItems.findIndex(item => item._id === action.payload.currentProduct._id);\n        state.cartItems[addedIndex].quantity++;\n      } else {\n        state.cartItems.push({\n          _id: action.payload.currentProduct._id,\n          price: action.payload.currentProduct.price,\n          size: action.payload.size,\n          quantity: action.payload.qty\n        });\n      }\n\n      return { ...state,\n        cartItems: [...state.cartItems],\n        ...sumItems(state.cartItems)\n      };\n\n    case 'REMOVE_PRODUCT':\n      return;\n\n    default:\n      return;\n  }\n};\nexport const sumItems = cartItems => {\n  let itemCount = cartItems.reduce((count, item) => count + item.quantity, 0);\n  let total = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0).toFixed(2);\n  return {\n    itemCount,\n    total\n  };\n};","map":{"version":3,"sources":["/Users/aimable/WebstormProjects/sneakershop/snkshop-frontend/src/context/CartReducer.js"],"names":["CartReducer","state","action","type","increasedIndex","cartItems","findIndex","item","_id","payload","product","size","quantity","sumItems","decreasedIndex","splice","exist","find","currentProduct","addedIndex","push","price","qty","itemCount","reduce","count","total","sum","toFixed"],"mappings":"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","sourcesContent":["export const CartReducer = (state, action) => {\n   switch (action.type) {\n      case 'INCREASE':\n         const increasedIndex = state.cartItems.findIndex(\n            (item) => item._id === action.payload.product._id && item.size === action.payload.size\n         );\n         state.cartItems[increasedIndex].quantity++;\n         return {\n            ...state,\n            cartItems: [...state.cartItems],\n            ...sumItems(state.cartItems),\n         };\n      case 'DECREASE':\n         const decreasedIndex = state.cartItems.findIndex(\n            (item) => item._id === action.payload.product._id && item.size === action.payload.size\n         );\n         if (state.cartItems[decreasedIndex].quantity === 1) {\n            state.cartItems.splice(decreasedIndex, 1);\n         } else {\n            state.cartItems[decreasedIndex].quantity--;\n         }\n         return {\n            ...state,\n            cartItems: [...state.cartItems],\n            ...sumItems(state.cartItems),\n         };\n      case 'ADD_PRODUCT':\n         const exist = state.cartItems.find(\n            (item) =>\n               item._id === action.payload.currentProduct._id && item.size === action.payload.size\n         );\n         if (exist) {\n            const addedIndex = state.cartItems.findIndex(\n               (item) => item._id === action.payload.currentProduct._id\n            );\n            state.cartItems[addedIndex].quantity++;\n         } else {\n            state.cartItems.push({\n               _id: action.payload.currentProduct._id,\n               price: action.payload.currentProduct.price,\n               size: action.payload.size,\n               quantity: action.payload.qty,\n            });\n         }\n         return {\n            ...state,\n            cartItems: [...state.cartItems],\n            ...sumItems(state.cartItems),\n         };\n      case 'REMOVE_PRODUCT':\n         return;\n      default:\n         return;\n   }\n};\n\nexport const sumItems = (cartItems) => {\n   let itemCount = cartItems.reduce((count, item) => count + item.quantity, 0);\n   let total = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0).toFixed(2);\n   return { itemCount, total };\n};\n"]},"metadata":{},"sourceType":"module"}