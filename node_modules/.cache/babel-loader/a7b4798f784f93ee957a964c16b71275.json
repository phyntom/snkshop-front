{"ast":null,"code":"var _jsxFileName = \"/Users/aimable/WebstormProjects/sneakershop/snkshop-frontend/src/pages/ProductPage.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Row, Col, Image, ListGroup, Card, Button, Form } from 'react-bootstrap';\nimport Rating from '../components/Rating';\nimport { StoreContext } from '../context/StoreContext';\nimport { CartContext } from '../context/CartContext';\nimport axios from 'axios';\n\nconst ProductPage = props => {\n  const {\n    id\n  } = props.match.params;\n  const [product, setProduct] = useState({});\n  const [qty, setQty] = useState(1);\n  const [size, setSize] = useState('');\n  const [qtyInSize, setQtyInSize] = useState(1);\n  const {\n    fetchProductById\n  } = useContext(StoreContext);\n  const {\n    addProduct\n  } = useContext(CartContext);\n\n  const fetchSelectedProduct = () => {\n    const selectedProduct = fetchProductById(id);\n    const initSize = selectedProduct.variants[0].quantity;\n    setQtyInSize(initSize);\n    setProduct(selectedProduct);\n  };\n\n  const handleSelectSize = selectedSize => {\n    const sizeQty = product.variants.find(item => item.size === selectedSize);\n    setSize(selectedSize);\n    if (sizeQty) setQtyInSize(parseInt(sizeQty.quantity));\n  };\n\n  const handleAddProduct = currentProduct => {\n    console.log(qty);\n    addProduct({\n      currentProduct,\n      size,\n      qty\n    });\n  }; // useEffect(fetchSelectedProduct, []);\n\n\n  useEffect(() => {\n    const fetchSingleProduct = async () => {\n      const res = await axios.get(`/api/products/${id}`);\n      setProduct(res.data);\n      const initSize = res.data.variants[0].size;\n      const initQtyInSize = res.data.variants[0].quantity;\n      setSize(initSize);\n      setQtyInSize(initQtyInSize);\n    };\n\n    fetchSingleProduct();\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Link, {\n    className: \"btn btn-dark my-3\",\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 10\n    }\n  }, \"Go Back\"), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: product.image,\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 16\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"lead\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 22\n    }\n  }, product.name)), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 22\n    }\n  }, \"Brand: \", product.brand)), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Rating, {\n    value: product.rating,\n    text: `${product.numReviews} reviews`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 22\n    }\n  })), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    className: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }\n  }, \"Price: $\", product.price), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 22\n    }\n  }, \"Description:\"), ' ', /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-weight-lighter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 22\n    }\n  }, product.description)))), /*#__PURE__*/React.createElement(Col, {\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 28\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 28\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 31\n    }\n  }, \"$\", product.price)))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 28\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 28\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 31\n    }\n  }, product.countInStock > 0 ? 'In Stock' : 'Out of Stock')))), product.countInStock > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 28\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 34\n    }\n  }, \"Size\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 34\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"select\",\n    value: size,\n    onChange: e => handleSelectSize(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 37\n    }\n  }, product.variants.map((item, index) => /*#__PURE__*/React.createElement(\"option\", {\n    key: item._id,\n    value: item.size,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 43\n    }\n  }, item.size)))))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 28\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 34\n    }\n  }, \"Qty\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 34\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"select\",\n    value: qty,\n    onChange: e => setQty(parseInt(e.target.value)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 37\n    }\n  }, [...Array(qtyInSize).keys()].map((item, index) => /*#__PURE__*/React.createElement(\"option\", {\n    key: index + 1,\n    value: index + 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 43\n    }\n  }, index + 1))))))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-block\",\n    type: \"button\",\n    disabled: product.countInStock === 0,\n    onClick: () => handleAddProduct(product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }, \"Add to Cart\")))))));\n};\n\nexport default ProductPage;","map":{"version":3,"sources":["/Users/aimable/WebstormProjects/sneakershop/snkshop-frontend/src/pages/ProductPage.js"],"names":["React","useState","useEffect","useContext","Link","Row","Col","Image","ListGroup","Card","Button","Form","Rating","StoreContext","CartContext","axios","ProductPage","props","id","match","params","product","setProduct","qty","setQty","size","setSize","qtyInSize","setQtyInSize","fetchProductById","addProduct","fetchSelectedProduct","selectedProduct","initSize","variants","quantity","handleSelectSize","selectedSize","sizeQty","find","item","parseInt","handleAddProduct","currentProduct","console","log","fetchSingleProduct","res","get","data","initQtyInSize","image","name","brand","rating","numReviews","price","description","countInStock","e","target","value","map","index","_id","Array","keys"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Row, Col, Image, ListGroup, Card, Button, Form } from 'react-bootstrap';\nimport Rating from '../components/Rating';\nimport { StoreContext } from '../context/StoreContext';\nimport { CartContext } from '../context/CartContext';\nimport axios from 'axios';\n\nconst ProductPage = (props) => {\n   const { id } = props.match.params;\n   const [product, setProduct] = useState({});\n   const [qty, setQty] = useState(1);\n   const [size, setSize] = useState('');\n   const [qtyInSize, setQtyInSize] = useState(1);\n   const { fetchProductById } = useContext(StoreContext);\n   const { addProduct } = useContext(CartContext);\n\n   const fetchSelectedProduct = () => {\n      const selectedProduct = fetchProductById(id);\n      const initSize = selectedProduct.variants[0].quantity;\n      setQtyInSize(initSize);\n      setProduct(selectedProduct);\n   };\n\n   const handleSelectSize = (selectedSize) => {\n      const sizeQty = product.variants.find((item) => item.size === selectedSize);\n      setSize(selectedSize);\n      if (sizeQty) setQtyInSize(parseInt(sizeQty.quantity));\n   };\n\n   const handleAddProduct = (currentProduct) => {\n      console.log(qty);\n      addProduct({ currentProduct, size, qty });\n   };\n\n   // useEffect(fetchSelectedProduct, []);\n\n   useEffect(() => {\n      const fetchSingleProduct = async () => {\n         const res = await axios.get(`/api/products/${id}`);\n         setProduct(res.data);\n         const initSize = res.data.variants[0].size;\n         const initQtyInSize = res.data.variants[0].quantity;\n         setSize(initSize);\n         setQtyInSize(initQtyInSize);\n      };\n      fetchSingleProduct();\n   }, []);\n\n   return (\n      <>\n         <Link className='btn btn-dark my-3' to='/'>\n            Go Back\n         </Link>\n         <Row>\n            <Col md={6}>\n               <Image src={product.image} fluid />\n            </Col>\n            <Col md={3}>\n               <ListGroup variant='flush'>\n                  <ListGroup.Item>\n                     <span className='lead'>{product.name}</span>\n                  </ListGroup.Item>\n                  <ListGroup.Item>\n                     <span className='h4'>Brand: {product.brand}</span>\n                  </ListGroup.Item>\n                  <ListGroup.Item>\n                     <Rating value={product.rating} text={`${product.numReviews} reviews`} />\n                  </ListGroup.Item>\n                  <ListGroup.Item className='h5'>Price: ${product.price}</ListGroup.Item>\n                  <ListGroup.Item>\n                     <span className='h5'>Description:</span>{' '}\n                     <span className='font-weight-lighter'>{product.description}</span>\n                  </ListGroup.Item>\n               </ListGroup>\n            </Col>\n            <Col md={3}>\n               <Card>\n                  <ListGroup variant='flush'>\n                     <ListGroup.Item>\n                        <Row>\n                           <Col>Price</Col>\n                           <Col>\n                              <strong>${product.price}</strong>\n                           </Col>\n                        </Row>\n                     </ListGroup.Item>\n                     <ListGroup.Item>\n                        <Row>\n                           <Col>Status</Col>\n                           <Col>\n                              <strong>\n                                 {product.countInStock > 0 ? 'In Stock' : 'Out of Stock'}\n                              </strong>\n                           </Col>\n                        </Row>\n                     </ListGroup.Item>\n                     {product.countInStock > 0 && (\n                        <>\n                           <ListGroup.Item>\n                              <Row>\n                                 <Col>Size</Col>\n                                 <Col>\n                                    <Form.Control\n                                       as='select'\n                                       value={size}\n                                       onChange={(e) => handleSelectSize(e.target.value)}\n                                    >\n                                       {product.variants.map((item, index) => (\n                                          <option key={item._id} value={item.size}>\n                                             {item.size}\n                                          </option>\n                                       ))}\n                                    </Form.Control>\n                                 </Col>\n                              </Row>\n                           </ListGroup.Item>\n                           <ListGroup.Item>\n                              <Row>\n                                 <Col>Qty</Col>\n                                 <Col>\n                                    <Form.Control\n                                       as='select'\n                                       value={qty}\n                                       onChange={(e) => setQty(parseInt(e.target.value))}\n                                    >\n                                       {[...Array(qtyInSize).keys()].map((item, index) => (\n                                          <option key={index + 1} value={index + 1}>\n                                             {index + 1}\n                                          </option>\n                                       ))}\n                                    </Form.Control>\n                                 </Col>\n                              </Row>\n                           </ListGroup.Item>\n                        </>\n                     )}\n                     <ListGroup.Item>\n                        <Button\n                           className='btn-block'\n                           type='button'\n                           disabled={product.countInStock === 0}\n                           onClick={() => handleAddProduct(product)}\n                        >\n                           Add to Cart\n                        </Button>\n                     </ListGroup.Item>\n                  </ListGroup>\n               </Card>\n            </Col>\n         </Row>\n      </>\n   );\n};\n\nexport default ProductPage;\n"]},"metadata":{},"sourceType":"module"}